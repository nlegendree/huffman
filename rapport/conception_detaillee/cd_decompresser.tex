\begin{algorithme}
    \fonction{estUnFichierCompresse}{fichier:FichierBinaire}{\booleen}{}{cle:\naturel}
    {
        \affecter{cle}{lireNaturel(fichier)}
        \retourner{cle = CLE}
        \commentaire{la valeur et le type (ici définie comme naturel) de la clé sont définis à la compression}
    }

    \fonction{lireStatistiques}{fichier:FichierBinaire}{Statistiques$<$Octet$>$}{}{stats:Statistiques$<$Octet$>$, i,buffer:\naturel}%
    {
        \affecter{stats}{statistiques()}  
        \affecter{buffer}{lireNaturel(fichier)}
        \affecter{stats.nbOccurenceTotale}{buffer}
        \pour{i}{0}{255}{}{
            \affecter{buffer}{lireNaturel(fichier)}
            \instruction{fixerOccurenceOctet(octet(i), buffer, stats)}
        }
        \retourner{stats}
    }

    \procedure{decompresserFichier}{
        \paramEntree{fichierSource,fichierDestination:FichierBinaire,arbre:arbreDeHuffmann$<$Octet$>$}}
        {}{code:CodeBinaire,resetCode:\booleen,octetLu:Octet,noeudActuel:arbreDeHuffmann$<$Octet$>$,bit:Bit,octet:Octet}
    {
        \affecter{noeudActuel}{arbre}
        \tantque{octetLu = lireOctet(fichierSource) ET non finFichier(fichierSource)}{
            \pour{i}{0}{7}{}{
                \affecter{bit}{obtenirIemeBit(octetLu,i)}
                \instruction{ajouterBit(code,bit)}
                \sialorssinon{bit = bitA0}{
                    \affecter{noeudActuel}{obtenirFilsGauche(noeudActuel)}
                }{
                    \affecter{noeudActuel}{obtenirFilsDroit(noeudActuel)}
                }
                \sialorssinon{estUneFeuille(noeudActuel)}{
                    \affecter{octet}{obtenirOctet(noeudActuel)}
                    \instruction{ecrireOctet(fichierDestination,octet)}
                    \affecter{resetCode}{VRAI}
                    \affecter{noeudActuel}{arbre}
                }{}
            }
        }
    }

    \fonction{decompresser}{nom:\chaine}{}{}{fichierSource,fichierDestination:FichierBinaire,stats:Statistiques$<$Octet$>$,arbre:ArbreDeHuffman$<$Octet$>$}%
    {
        \affecter{fichierSource}{fichierBinaire(nom)}
        \instruction{ouvrir(fichierSource,lecture)}
        \sialorssinon{estUnFichierCompresse(fichierSource)}
        {
            \instruction{supprimerExtension(nom)}
            \affecter{fichierDestination}{fichierBinaire(nom)}
            \instruction{ouvrir(fichierDestination,ecriture)}
            \affecter{stats}{lireStatistiques(nom)}
            \affecter{arbre}{creerArbre(stats)}
            \instruction{decompresserFichier(source,arbre)}
            \instruction{fermer(fichierDestination)}
        }
        \instruction{fermer(fichierSource)}
    }

\end{algorithme}
