\begin{algorithme}
    \procedure{compresser}{\paramEntree{nom:\chaine}}{}{stats:Statistiques$<$Octet$>$,arbre:ArbreDeHuffman$<$Octet$>$}%
    {
        \affecter{stats}{calculerStatistiques(nom)}
        \affecter{arbre}{creerArbre(stats)}
        \affecter{table}{codage(arbre)}
        \instruction{compresserFichier(source,table,stats)}
    }
    \fonction{calculerStatistiques}{nom:\chaine}{Statistiques$<$Octet$>$}{}{fichier:FichierBinaire,stats:Statistiques$<$Octet$>$}%
    {
        \affecter{fichier}{fichierBinaire(nom)}  
        \instruction{ouvrir(fichier,lecture)}
        \affecter{stats}{statistiques()}
        \tantque{non finFichier(fichier)}%
        {
            \instruction{incrementerOccurenceElement(stats,lireOctet(fichier))}
        }
        \instruction{fermer(fichier)}
        \retourner{stats}
    }

    \fonction{creerArbre}{stats:Statistiques$<$Octet$>$}{ArbreDeHuffman$<$Octet$>$}{}{i:\naturel , file:FileDePriorité$<$ArbreDeHuffmann$>$}
    {
        \affecter{file}{fileDePrioriteVide()}
        \pour{i}{0}{255}{}
        {
            \sialorssinon{obtenirOccurenceElement(octet(i))$\ne$0}
            {
                \instruction{ajouterElement(file,arbreDeHuffmann(octet(i),obtenirOccurenceElement(octet(i))))}
            }{}
        }
        \tantque{longueur(file)$>$1}
        {
            \affecter{arbreGauche}{obtenirDernier(file)}
            \instruction{supprimerDernier(file)}
            \affecter{arbreDroit}{obtenirDernier(file)}
            \instruction{supprimerDernier(file)}
            \instruction{ajouterElement(file,combiner(arbreGauche,arbreDroit))}
        }
        \retourner{obtenirDernier(file)}
    }  

    \fonction{codage}{arbre: ArbreDeHuffman$<$Octet$>$}{TableDeCodage$<$Octet$>$}{}{table:TableDeCodage$<$Octet$>$}%
    {
        \affecter{table}{tableDeCodage()}
        \sialorssinon{estUneFeuille(arbre)}
        {
            \instruction{ajouterElement(table,obtenirElement(arbre),codeBinaire(Bit0))}
        }%
        {
            \instruction{descendreArbre(obtenirFilsDroit(arbre),codeBinaire(Bit1),table)}
            \instruction{descendreArbre(obtenirFilsGauche(arbre),codeBinaire(Bit0),table)}
        }
        \retourner{table}
    }
    \procedure{descendreArbre}{\paramEntree{arbre:ArbreDeHuffman$<$Octet$>$,code:CodeBinaire},\paramEntreeSortie{table:TableDeCodage$<$Octet$>$}}{}{codeTemp:codeBinaire}%
    {
        \sialorssinon{estUneFeuille(arbre)}%
        {
            \instruction{ajouterElement(table,obtenirElement(arbre),code)}
        }%
        {
            \affecter{codeTemp}{code}
            \instruction{ajouterBit(code,Bit1)}
            \instruction{ajouterBit(codeTemp,Bit0)}
            \instruction{descendreArbre(obtenirFilsDroit(arbre),code,table)}
            \instruction{descendreArbre(obtenirFilsGauche(arbre),codeTemp,table)}
        }
    }
    \procedure{compresserFichier}{\paramEntree{nom: \chaine, table: TableDeCodage$<$Octet$>$, stats: Statistiques$<$Octets$>$}}{}{}%
    {
        \affecter{fichierSource}{fichierBinaire(nom)}
        \affecter{fichierDestination}{fichierBinaire(nom + ".huff")}  
        \instruction{ouvrir(fichierSource,lecture)}
        \instruction{ouvrir(fichierDestination,écriture)}
        \instruction{ecrireNaturel(fichierDestination,CLE)}
        \instruction{ecrireNaturel(fichierDestination,nbElement(stats))}
        \pour{i}{0}{255}{}
        {
            \instruction{ecrireNaturel(fichierDestination,obtenirOccurenceElement(octet(i)))}
        }
        \tantque{non finFichier(fichierSource)}%
        {
            \instruction{concatenerCodeBinaire(fichierDestination,obtenirCodeElement(table,lireOctet(fichierSource)))}
        }
        \instruction{fermer(fichierSource)}
        \instruction{fermer(fichierDestination)}
    }

\end{algorithme}
